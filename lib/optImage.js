(()=>{"use strict";var e={432:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(384));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const e=this.getAttribute("image-url"),t=this.getAttribute("height"),r=this.getAttribute("resolutions");if(!e)throw new Error("Image url cannot be undefined or null.");const n=document.createElement("picture"),i=new o.default,a=r?s._getResolutions(r):[320,480,800];let d=0;for(const r of a)this._generateResizedImage({url:e,width:r,height:Number(t)}).then((e=>{s._renderPicture(e,n,r),d===a.length-1&&n.appendChild(e),d++}));const c=i.addStyle("img { width: 100%; object-fit: cover; }");this.shadowRoot.adoptedStyleSheets=[c],this.shadowRoot.appendChild(n)}_generateResizedImage({url:e,width:t,height:r}){return new Promise((n=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{const e=document.createElement("canvas"),s=e.getContext("2d"),i=o.height/o.width,a=r||Math.round(t*i);e.width=t,e.height=a,s.drawImage(o,0,0,t,a);const d=document.createElement("img");d.src=e.toDataURL("image/jpeg"),d.alt=`Imagem redimensionada para ${t}x${a}`,n(d)},o.src=`${e}?width=${t}`}))}static _renderPicture(e,t,r){const n=document.createElement("source");n.setAttribute("srcset",e.src),n.setAttribute("media",`(max-width: ${r}px)`),t.appendChild(n)}static _getResolutions(e){return"string"==typeof e?e.split(",").map(Number):e.map((e=>"number"==typeof e?e:Number(e)))}}customElements.define("opt-image",s)},384:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{addStyle(e){const t=new CSSStyleSheet;return t.replaceSync(e),t}}}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(432)})();